(()=>{"use strict";var e,t,r={6736:(e,t,r)=>{const n=r(1529)(r(2533)),o=n.its;function a(e,t,r){let n=[];for(let o=t;o<t+r&&o<e.length();o++)n.push(e.itemAt(o));return n}n.as,console.log("Worker started.");var s=null,c=1;self.onmessage=e=>{e.data.responses&&(s=e.data.responses),e.data.minNgramLength&&(c=e.data.minNgramLength),s&&function(e){const t=[...new Set(e)],r=t.map((e=>n.readDoc(e)));if(e.length>10&&t.length<.2*e.length){let t={};return e.forEach((e=>{let r=e.trim().toLowerCase();t[r]||(t[r]=0),t[r]++})),void self.postMessage({type:"categories",content:{categories:t}})}self.postMessage({type:"update",content:{responses:r.length}});let s={},p=[];function i(e){return e.map((e=>e.out(o.lemma))).join(" ")}for(let e=6;e>=c;e--)r.forEach(((t,r)=>{t.sentences().each((t=>{let n=t.tokens().filter((e=>"word"==e.out(o.type)&&!e.out(o.stopWordFlag)&&!p[r]?.has(e.index())));for(let t=0;t<=n.length()-e;t++){let o=a(n,t,e),c=i(o);s[c]||(s[c]=[]),s[c].push({responseIndex:r,ngram:o})}}))})),Object.entries(s).forEach((([e,t])=>{t.length<3&&delete s[e]})),Object.values(s).forEach((e=>{e.forEach((({responseIndex:e,ngram:t})=>{void 0===p[e]&&(p[e]=new Set),t.forEach((t=>p[e].add(t.index())))}))}));Object.entries(s).forEach((([e,t])=>{s[e]=t.map((e=>{let t=e.ngram[0].parentDocument().out(),r=n.readDoc(t).tokens(),a=r.itemAt(e.ngram[0].index()),s=r.itemAt(e.ngram[e.ngram.length-1].index()),c=['<span class="match">',"</span>"];1==e.ngram.length?a.markup(c[0],c[1]):(a.markup(c[0],""),s.markup("",c[1]));let p=a.parentDocument().out(o.markedUpText);return{response:t,phrase:p.slice(p.indexOf(c[0])+c[0].length,p.indexOf(c[1])),markup:p}}));let r={};s[e].forEach((e=>{r[e.phrase]||(r[e.phrase]=0),r[e.phrase]++}));let a=Object.entries(r).reduce(((e,t)=>e[1]>t[1]?e:t))[0];s[e]={commonPhrase:a,responses:s[e]}})),self.postMessage({type:"ngrams",content:{ngrams:s}})}(s)}}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return r[e](a,a.exports,o),a.exports}o.m=r,o.x=()=>{var e=o.O(void 0,[968],(()=>o(6736)));return o.O(e)},e=[],o.O=(t,r,n,a)=>{if(!r){var s=1/0;for(l=0;l<e.length;l++){for(var[r,n,a]=e[l],c=!0,p=0;p<r.length;p++)(!1&a||s>=a)&&Object.keys(o.O).every((e=>o.O[e](r[p])))?r.splice(p--,1):(c=!1,a<s&&(s=a));if(c){e.splice(l--,1);var i=n();void 0!==i&&(t=i)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,n,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>e+".phrasecloud.bundle.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!e;)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={736:1};o.f.i=(t,r)=>{e[t]||importScripts(o.p+o.u(t))};var t=self.webpackChunkphrasecloud=self.webpackChunkphrasecloud||[],r=t.push.bind(t);t.push=t=>{var[n,a,s]=t;for(var c in a)o.o(a,c)&&(o.m[c]=a[c]);for(s&&s(o);n.length;)e[n.pop()]=1;r(t)}})(),t=o.x,o.x=()=>o.e(968).then(t),o.x()})();